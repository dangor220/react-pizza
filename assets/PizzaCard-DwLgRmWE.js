import{j as e,S as c,e as k,f as N,a as u,u as o,g as v,h as C,P as b,s as d,b as g}from"./index-CgJqX7XV.js";import{B as f}from"./BackButton-CVr9sc0D.js";function S(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pizza__card",children:[e.jsx("div",{className:"pizza__image",children:e.jsx(c,{className:"skeleton__pizza",containerClassName:"skeleton__pizza-container skeleton__pizza-card-container",circle:!0})}),e.jsxs("div",{className:"pizza__info",children:[e.jsx("h2",{className:"pizza__title",children:e.jsx(c,{className:"skeleton__title",containerClassName:"skeleton__title-container"})}),e.jsx(c,{className:"skeleton__description",containerClassName:"skeleton__description-container"}),e.jsx(c,{className:"skeleton__selector",containerClassName:"skeleton__selector-container skeleton__selector-card-container",borderRadius:10}),e.jsxs("div",{className:"pizza-block__bottom",children:[e.jsx("div",{className:"pizza-block__price",children:e.jsx(c,{className:"skeleton__price",containerClassName:"skeleton__price-container skeleton__price-card-container"})}),e.jsx(c,{className:"skeleton__add",containerClassName:"skeleton__add-container skeleton__add-card-container"})]})]})]}),e.jsx("div",{className:"cart__bottom-buttons",children:e.jsx(c,{className:"skeleton__back",containerClassName:"skeleton__back-container skeleton__back-card-container"})})]})}function w(){const{id:s}=k(),_=N(),n=u(),{pizzaItem:a,pizzaProps:t,pizzaStatus:r,error:z,pizzaTypes:p,pizzaSizes:m}=o(i=>i.pizza);if(!s)return e.jsx(e.Fragment,{children:"Загрузка..."});const l=o(i=>i.cart.items[s]);v.useEffect(()=>{n(C(s))},[]);const x=()=>{const i={id:a.id,imageUrl:a.imageUrl,title:a.title,price:t[s].resultPrice,type:p[t[s].activeType],size:m[t[s].activeSize],count:1};n(g(i))},h=()=>l.reduce((i,j)=>i+=j.count,0);return r==="error"&&(alert(`Ошибка получения данных! ${z} Вернуться на страницу.`),_("/")),r==="success"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pizza__card",children:[e.jsx("div",{className:"pizza__image",children:e.jsx("img",{src:a.imageUrl,alt:a.title})}),e.jsxs("div",{className:"pizza__info",children:[e.jsx("h2",{className:"pizza__title",children:a.title}),e.jsx("p",{className:"pizza__description",children:a.description}),e.jsx(b,{id:+s,types:a.types,sizes:a.sizes,activeSize:t[s].activeSize,activeType:t[s].activeType,handleSelectType:i=>{n(d({id:s,price:a.price[t[s].activeSize]+(i+0)*50}))},handleSelectSize:i=>{n(d({id:s,price:a.price[i]+(t[s].activeType+0)*50}))}}),e.jsxs("div",{className:"pizza-block__bottom",children:[e.jsxs("div",{className:"pizza-block__price",children:[e.jsx("span",{children:"Цена:"})," ",t[s].resultPrice," ₽"]}),e.jsxs("div",{className:"button button--outline button--add",onClick:x,children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})}),e.jsx("span",{children:"Добавить"}),(l==null?void 0:l.length)&&e.jsx("i",{children:h()})]})]})]})]}),e.jsx("div",{className:"cart__bottom-buttons",children:e.jsx(f,{})})]}):e.jsx(S,{})}export{w as default};
